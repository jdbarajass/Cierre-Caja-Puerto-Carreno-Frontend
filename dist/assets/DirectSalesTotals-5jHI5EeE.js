import{a as e,g as s,d as t,j as a}from"./index-B5Nl9W-M.js";import{r as l}from"./react-vendor-CfGu_lG-.js";import{a as r,b as n}from"./directApiService-Bf6ZLS1J.js";import{T as d,i,A as o,k as c,h as x,m,D as h,B as g,j as p,J as u,n as j,z as b,P as y,f as N}from"./icons-YGAATwQK.js";const f=async(e,{maxRetries:s=3,retryDelay:t=8e3,shouldRetry:a=(e,s)=>{var t,a,l;return s?"TypeError"===s.name||(null==(t=s.message)?void 0:t.includes("timeout"))||(null==(a=s.message)?void 0:a.includes("network"))||(null==(l=s.message)?void 0:l.includes("fetch")):!e||!1===e.success},onRetry:l=(e,s)=>{}}={})=>{let r=null,n=null;for(let i=0;i<=s;i++)try{i>0&&(l(i,s),await new Promise(e=>setTimeout(e,t)));const d=await e();if(n=d,r=null,!a(d,null)||i===s)return d}catch(d){if(r=d,n=null,i===s||!a(null,d))throw d}if(r)throw r;return n},v=()=>{e("Totales de Ventas - Estadísticas Avanzadas");const[v,w]=l.useState("quick"),[_,C]=l.useState(!1),[P,k]=l.useState(null),[M,T]=l.useState(null),[V,S]=l.useState(()=>{const e=new Date;return e.setDate(1),e.toISOString().split("T")[0]}),[E,D]=l.useState(s()),[A,F]=l.useState(!1),[I,R]=l.useState(null),[H,O]=l.useState(null),[z,U]=l.useState(()=>{const e=new Date;return e.setDate(1),e.toISOString().split("T")[0]}),[$,q]=l.useState(s()),[L,B]=l.useState(!1),[G,J]=l.useState(null),[K,Q]=l.useState(null);l.useEffect(()=>{W()},[]);const W=async()=>{B(!0),J(null);try{const e=await t();if(!(e&&e.success&&e.goals))throw new Error((null==e?void 0:e.error)||"Error al obtener metas de ventas");Q(e),J(null)}catch(e){J(e.message||"Error al cargar las metas"),Q(null)}finally{B(!1)}},X=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e||0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-600 rounded-xl shadow-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(d,{className:"w-8 h-8"}),a.jsx("h1",{className:"text-2xl font-bold",children:"Ventas Totales y Métricas Mensuales"})]}),a.jsx("p",{className:"text-yellow-50",children:"Consulta de totales de ventas y análisis detallado de métricas mensuales"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(i,{className:"w-6 h-6 text-emerald-600"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Metas de Ventas (+25% vs Año Anterior)"})]}),a.jsx("button",{onClick:W,disabled:L,className:"px-3 py-1 text-sm bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 disabled:opacity-50 transition-colors",children:L?"Actualizando...":"Actualizar"})]}),G&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4 flex items-center gap-2",children:[a.jsx(o,{className:"w-4 h-4 text-red-600"}),a.jsx("p",{className:"text-sm text-red-600",children:G})]}),L&&!K&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(c,{className:"w-8 h-8 text-emerald-600 animate-spin"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Cargando metas..."})]}),K&&K.goals&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-5 rounded-xl border-2 "+(K.goals.daily.is_achieved?"bg-gradient-to-br from-emerald-50 to-green-50 border-emerald-300":"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-300"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-2 rounded-lg "+(K.goals.daily.is_achieved?"bg-emerald-100":"bg-amber-100"),children:K.goals.daily.is_achieved?a.jsx(x,{className:"w-5 h-5 text-emerald-600"}):a.jsx(i,{className:"w-5 h-5 text-amber-600"})}),a.jsx("span",{className:"font-semibold text-gray-700",children:"Meta Diaria"})]}),K.goals.daily.is_achieved&&a.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full",children:"META CUMPLIDA"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Venta del mismo día año pasado:"}),a.jsx("span",{className:"font-medium text-gray-700",children:K.goals.daily.base_previous_year_formatted})]}),a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Meta (+25%):"}),a.jsx("span",{className:"text-xl font-bold text-gray-800",children:K.goals.daily.goal_formatted})]}),a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Venta hoy:"}),a.jsx("span",{className:"text-lg font-bold "+(K.goals.daily.is_achieved?"text-emerald-600":"text-amber-600"),children:K.goals.daily.current_formatted})]}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[a.jsx("span",{children:"Progreso"}),a.jsxs("span",{children:[K.goals.daily.progress_percentage,"%"]})]}),a.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-500 "+(K.goals.daily.is_achieved?"bg-emerald-500":"bg-amber-500"),style:{width:`${Math.min(100,K.goals.daily.progress_percentage)}%`}})})]}),!K.goals.daily.is_achieved&&K.goals.daily.remaining>0&&a.jsxs("div",{className:"mt-2 text-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Falta: "}),a.jsx("span",{className:"font-bold text-amber-600",children:K.goals.daily.remaining_formatted})]})]})]}),a.jsxs("div",{className:"p-5 rounded-xl border-2 "+(K.goals.monthly.is_achieved?"bg-gradient-to-br from-emerald-50 to-green-50 border-emerald-300":"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-300"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-2 rounded-lg "+(K.goals.monthly.is_achieved?"bg-emerald-100":"bg-blue-100"),children:K.goals.monthly.is_achieved?a.jsx(x,{className:"w-5 h-5 text-emerald-600"}):a.jsx(i,{className:"w-5 h-5 text-blue-600"})}),a.jsx("span",{className:"font-semibold text-gray-700",children:"Meta Mensual"})]}),K.goals.monthly.is_achieved&&a.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full",children:"META CUMPLIDA"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Venta mismo mes año pasado:"}),a.jsx("span",{className:"font-medium text-gray-700",children:K.goals.monthly.base_previous_year_formatted})]}),a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Meta (+25%):"}),a.jsx("span",{className:"text-xl font-bold text-gray-800",children:K.goals.monthly.goal_formatted})]}),a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Venta acumulada:"}),a.jsx("span",{className:"text-lg font-bold "+(K.goals.monthly.is_achieved?"text-emerald-600":"text-blue-600"),children:K.goals.monthly.current_formatted})]}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[a.jsx("span",{children:"Progreso"}),a.jsxs("span",{children:[K.goals.monthly.progress_percentage,"%"]})]}),a.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-500 "+(K.goals.monthly.is_achieved?"bg-emerald-500":"bg-blue-500"),style:{width:`${Math.min(100,K.goals.monthly.progress_percentage)}%`}})})]}),!K.goals.monthly.is_achieved&&K.goals.monthly.remaining>0&&a.jsxs("div",{className:"mt-2 text-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Falta: "}),a.jsx("span",{className:"font-bold text-blue-600",children:K.goals.monthly.remaining_formatted})]})]})]})]}),K&&K.daily_comparison&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"p-2 rounded-lg "+(K.daily_comparison.comparison.is_growth?"bg-green-100":"bg-red-100"),children:K.daily_comparison.comparison.is_growth?a.jsx(d,{className:"w-4 h-4 text-green-600"}):a.jsx(m,{className:"w-4 h-4 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Cambio diario vs año anterior"}),a.jsxs("p",{className:"font-bold "+(K.daily_comparison.comparison.is_growth?"text-green-600":"text-red-600"),children:[K.daily_comparison.comparison.is_growth?"+":"",K.daily_comparison.comparison.percentage_change,"%"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"p-2 rounded-lg "+(K.monthly_comparison.comparison.is_growth?"bg-green-100":"bg-red-100"),children:K.monthly_comparison.comparison.is_growth?a.jsx(d,{className:"w-4 h-4 text-green-600"}):a.jsx(m,{className:"w-4 h-4 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Cambio mensual vs año anterior"}),a.jsxs("p",{className:"font-bold "+(K.monthly_comparison.comparison.is_growth?"text-green-600":"text-red-600"),children:[K.monthly_comparison.comparison.is_growth?"+":"",K.monthly_comparison.comparison.percentage_change,"%"]})]})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsx("button",{onClick:()=>w("quick"),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors "+("quick"===v?"bg-yellow-50 text-yellow-700 border-b-2 border-yellow-500":"text-gray-600 hover:bg-gray-50"),children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(h,{className:"w-5 h-5"}),a.jsx("span",{children:"Totales de Ventas"})]})}),a.jsx("button",{onClick:()=>w("monthly"),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors "+("monthly"===v?"bg-orange-50 text-orange-700 border-b-2 border-orange-500":"text-gray-600 hover:bg-gray-50"),children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(g,{className:"w-5 h-5"}),a.jsx("span",{children:"Ventas Mensuales y Métricas"})]})})]}),"quick"===v&&a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Selecciona el rango de fechas"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(p,{className:"w-4 h-4 inline mr-1"}),"Desde"]}),a.jsx("input",{type:"date",value:V,onChange:e=>S(e.target.value),max:E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(p,{className:"w-4 h-4 inline mr-1"}),"Hasta"]}),a.jsx("input",{type:"date",value:E,onChange:e=>D(e.target.value),min:V,max:s(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:async()=>{C(!0),k(null);try{const e=await f(()=>r({from:V,to:E}),{maxRetries:3,retryDelay:8e3,shouldRetry:(e,s)=>{var t,a,l;return s?(null==(t=s.message)?void 0:t.includes("timeout"))||(null==(a=s.message)?void 0:a.includes("network"))||(null==(l=s.message)?void 0:l.includes("fetch")):!e||!e.success||0===e.total_sales},onRetry:(e,s)=>{k(`El servidor se está iniciando... Reintento ${e}/${s}`)}});if(!e||!e.success)throw new Error((null==e?void 0:e.error)||"Error al obtener resumen de ventas");T(e),k(null)}catch(e){k(e.message||"El servidor no responde. Intenta nuevamente en unos minutos."),T(null)}finally{C(!1)}},disabled:_||!V||!E,className:"w-full px-6 py-2 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:_?"Consultando...":"Consultar"})})]})]}),P&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(o,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-red-800",children:"Error al cargar ventas"}),a.jsx("p",{className:"text-red-600 text-sm mt-1",children:P})]})]}),_&&a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center",children:[a.jsx(c,{className:"w-12 h-12 text-yellow-600 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Consultando totales de ventas..."})]}),!_&&!P&&M&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(h,{className:"w-6 h-6 text-green-600"}),a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Total de Ventas"})]}),a.jsx("p",{className:"text-3xl font-bold text-green-600",children:M.total_sales_formatted||X(M.total_sales)})]}),a.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(u,{className:"w-6 h-6 text-blue-600"}),a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Días Procesados"})]}),a.jsx("p",{className:"text-3xl font-bold text-blue-600",children:M.days_count||0})]})]}),!_&&!P&&!M&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[a.jsx(d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Consulta tus ventas"}),a.jsx("p",{className:"text-gray-600",children:'Selecciona un rango de fechas y haz clic en "Consultar" para ver los totales'})]})]}),"monthly"===v&&a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Selecciona el rango de fechas para análisis"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(p,{className:"w-4 h-4 inline mr-1"}),"Desde"]}),a.jsx("input",{type:"date",value:z,onChange:e=>U(e.target.value),max:$,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(p,{className:"w-4 h-4 inline mr-1"}),"Hasta"]}),a.jsx("input",{type:"date",value:$,onChange:e=>q(e.target.value),min:z,max:s(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:async()=>{F(!0),R(null);try{const e=await f(()=>n({from:z,to:$}),{maxRetries:3,retryDelay:1e4,shouldRetry:(e,s)=>{var t,a,l;return s?(null==(t=s.message)?void 0:t.includes("timeout"))||(null==(a=s.message)?void 0:a.includes("network"))||(null==(l=s.message)?void 0:l.includes("fetch")):!e||!e.success||!e.data||0===e.data.length},onRetry:(e,s)=>{R(`El servidor se está iniciando... Reintento ${e}/${s} (puede tomar hasta 30 segundos)`)}});if(!e||!e.success)throw new Error((null==e?void 0:e.error)||"Error al obtener documentos de ventas");{const s=(e=>{if(!e||0===e.length)return null;const s=e.reduce((e,s)=>e+(s.total||0),0),t=e.length,a=t>0?s/t:0,l={};e.forEach(e=>{const s=e.paymentMethod||"No especificado";l[s]||(l[s]={total:0,count:0}),l[s].total+=e.total||0,l[s].count+=1});const r=Object.entries(l).map(([e,t])=>({metodo:e,total:t.total,count:t.count,porcentaje:s>0?t.total/s*100:0})).sort((e,s)=>s.total-e.total),n={};e.forEach(e=>{const s=e.seller||"Sin vendedor";n[s]||(n[s]={total:0,count:0}),n[s].total+=e.total||0,n[s].count+=1});const d=Object.entries(n).map(([e,s])=>({vendedor:e,total:s.total,count:s.count,ticketPromedio:s.count>0?s.total/s.count:0})).sort((e,s)=>s.total-e.total),i={};let o=0;e.forEach((e,s)=>{e.items&&Array.isArray(e.items)&&e.items.forEach(e=>{const s=e.name||"Sin nombre",t=e.quantity||0,a=t*(e.price||0);i[s]||(i[s]={cantidad:0,ingresos:0}),i[s].cantidad+=t,i[s].ingresos+=a,o+=t})});const c=Object.entries(i).map(([e,s])=>({nombre:e,cantidad:s.cantidad,ingresos:s.ingresos})).sort((e,s)=>s.cantidad-e.cantidad),x=[...c].sort((e,s)=>s.ingresos-e.ingresos),m=t>0?o/t:0,h={};e.forEach(e=>{var s,t;const a=(null==(s=e.client)?void 0:s.id)||"Sin cliente",l=(null==(t=e.client)?void 0:t.name)||"Cliente general";h[a]||(h[a]={nombre:l,total:0,count:0}),h[a].total+=e.total||0,h[a].count+=1});const g=Object.keys(h).length,p=g>0?s/g:0,u=Object.entries(h).map(([e,s])=>({id:e,nombre:s.nombre,total:s.total,count:s.count})).sort((e,s)=>s.total-e.total).slice(0,10),j={};for(let f=0;f<24;f++)j[f]={total:0,count:0};e.forEach(e=>{if(e.date||e.datetime)try{const s=new Date(e.date||e.datetime).getHours();s>=0&&s<24&&(j[s].total+=e.total||0,j[s].count+=1)}catch(s){}});const b=Object.entries(j).map(([e,s])=>({hora:parseInt(e),total:s.total,count:s.count})).sort((e,s)=>s.total-e.total),y=b[0],N={manana:{total:0,count:0},tarde:{total:0,count:0},noche:{total:0,count:0}};return b.forEach(({hora:e,total:s,count:t})=>{e>=6&&e<=11?(N.manana.total+=s,N.manana.count+=t):e>=12&&e<=17?(N.tarde.total+=s,N.tarde.count+=t):e>=18&&e<=23&&(N.noche.total+=s,N.noche.count+=t)}),{general:{totalVentas:s,numFacturas:t,ticketPromedio:a,ventasPromedioFactura:a},metodosPago:r,vendedores:d,productos:{porCantidad:c.slice(0,10),porIngresos:x.slice(0,10),totalUnidades:o,cantidadPromedioProductos:m},clientes:{clientesUnicos:g,ticketPromedioPorCliente:p,topClientes:u},tiempo:{ventasPorHora:b,horaMayorVentas:y,franjas:N}}})(e.data);O(s),R(null)}}catch(e){R(e.message||"El servidor no responde. Intenta nuevamente en unos minutos."),O(null)}finally{F(!1)}},disabled:A||!z||!$,className:"w-full px-6 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:A?"Analizando...":"Consultar"})})]})]}),I&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(o,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-red-800",children:"Error al cargar métricas"}),a.jsx("p",{className:"text-red-600 text-sm mt-1",children:I})]})]}),A&&a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center",children:[a.jsx(c,{className:"w-12 h-12 text-orange-600 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analizando ventas y métricas..."})]}),!A&&!I&&H&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(h,{className:"w-5 h-5 text-orange-600"}),"Métricas Generales de Ventas"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total de Ventas"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:X(H.general.totalVentas)})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Número de Facturas"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:H.general.numFacturas})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ticket Promedio"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:X(H.general.ticketPromedio)})]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Promedio por Factura"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:X(H.general.ventasPromedioFactura)})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(j,{className:"w-5 h-5 text-orange-600"}),"Métodos de Pago"]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Método"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Transacciones"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% del Total"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:H.metodosPago.map((e,s)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.metodo}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-green-600 font-semibold",children:X(e.total)}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-blue-600",children:e.count}),a.jsxs("td",{className:"px-4 py-3 text-sm text-right text-purple-600 font-semibold",children:[e.porcentaje.toFixed(1),"%"]})]},s))})]})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(b,{className:"w-5 h-5 text-orange-600"}),"Ranking de Vendedores"]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vendedor"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Vendido"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Facturas"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ticket Promedio"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:H.vendedores.map((e,s)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.vendedor}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-green-600 font-semibold",children:X(e.total)}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-blue-600",children:e.count}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-purple-600",children:X(e.ticketPromedio)})]},s))})]})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(y,{className:"w-5 h-5 text-orange-600"}),"Productos Destacados"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total de Unidades Vendidas"}),a.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:H.productos.totalUnidades})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Promedio Productos por Factura"}),a.jsx("p",{className:"text-2xl font-bold text-pink-600",children:H.productos.cantidadPromedioProductos.toFixed(1)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Top 10 - Más Vendidos por Cantidad"}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Producto"}),a.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Cant."})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:H.productos.porCantidad.map((e,s)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2 text-xs text-gray-900 truncate max-w-[200px]",title:e.nombre,children:e.nombre}),a.jsx("td",{className:"px-3 py-2 text-xs text-right text-blue-600 font-semibold",children:e.cantidad})]},s))})]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Top 10 - Mayores Ingresos"}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Producto"}),a.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Ingresos"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:H.productos.porIngresos.map((e,s)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2 text-xs text-gray-900 truncate max-w-[200px]",title:e.nombre,children:e.nombre}),a.jsx("td",{className:"px-3 py-2 text-xs text-right text-green-600 font-semibold",children:X(e.ingresos)})]},s))})]})})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(b,{className:"w-5 h-5 text-orange-600"}),"Clientes"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-cyan-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Clientes Únicos"}),a.jsx("p",{className:"text-2xl font-bold text-cyan-600",children:H.clientes.clientesUnicos})]}),a.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ticket Promedio por Cliente"}),a.jsx("p",{className:"text-2xl font-bold text-teal-600",children:X(H.clientes.ticketPromedioPorCliente)})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Top 10 Clientes por Compra Total"}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Compras"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:H.clientes.topClientes.map((e,s)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.nombre}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-green-600 font-semibold",children:X(e.total)}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-blue-600",children:e.count})]},s))})]})})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(N,{className:"w-5 h-5 text-orange-600"}),"Análisis de Horarios"]}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Hora con Mayor Volumen de Ventas"}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-700",children:[H.tiempo.horaMayorVentas.hora,":00 - ",H.tiempo.horaMayorVentas.hora+1,":00"]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[X(H.tiempo.horaMayorVentas.total)," en ",H.tiempo.horaMayorVentas.count," transacciones"]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Distribución por Franja Horaria"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Mañana (6am - 11am)"}),a.jsx("p",{className:"text-xl font-bold text-orange-600",children:X(H.tiempo.franjas.manana.total)}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[H.tiempo.franjas.manana.count," transacciones"]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tarde (12pm - 5pm)"}),a.jsx("p",{className:"text-xl font-bold text-blue-600",children:X(H.tiempo.franjas.tarde.total)}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[H.tiempo.franjas.tarde.count," transacciones"]})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Noche (6pm - 11pm)"}),a.jsx("p",{className:"text-xl font-bold text-purple-600",children:X(H.tiempo.franjas.noche.total)}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[H.tiempo.franjas.noche.count," transacciones"]})]})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Top 5 Horas de Mayor Venta"}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Hora"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Transacciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:H.tiempo.ventasPorHora.slice(0,5).map((e,s)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[e.hora,":00 - ",e.hora+1,":00"]}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-green-600 font-semibold",children:X(e.total)}),a.jsx("td",{className:"px-4 py-3 text-sm text-right text-blue-600",children:e.count})]},s))})]})})]})]})]}),!A&&!I&&!H&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[a.jsx(g,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Analiza tus ventas mensuales"}),a.jsx("p",{className:"text-gray-600",children:'Selecciona un rango de fechas y haz clic en "Consultar" para ver métricas detalladas'})]})]})]})]})};export{v as default};
